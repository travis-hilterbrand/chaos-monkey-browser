/*
 * chaos-monkey-browser
 * Copyright (c) 2013 Travis Hilterbrand, contributors
 * Licensed under the MIT license.
 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],function(){return a.ChaosMonkey=b(),a.ChaosMonkey}):void 0===a.ChaosMonkey&&(a.ChaosMonkey=b())}(this,function(){var a={delay:function(a,b,c){setTimeout(function(){c()},1e3+5e3*Math.random())},http403:function(a,b,c,d){var e="You Shall Not Pass",f={status:403,responseText:'"{"error":'+e+'}"',statusText:e};d.error(f,"error",e),b.rejectWith(d,[f,"error",e])},http404:function(a,b,c,d){var e="This is not the URL you are looking for",f={status:404,responseText:'"{"error":'+e+'}"',statusText:e};d.error(f,"error",e),b.rejectWith(d,[f,"error",e])},http500:function(a,b,c,d){var e="Internal Server Error",f={status:500,responseText:'"{"error":'+e+'}"',statusText:e};d.error(f,"error",e),b.rejectWith(d,[f,"error",e])}},b=function(a){this.initialize(a)};b.prototype.initialize=function(b){b=b||{},b.probability=b.probability||.1,b.allowedMethods=b.allowedMethods||["GET","POST","PUT","DELETE"],b.mischiefTypes=b.mischiefTypes||a,this.options=b,this.originalAjax=$.ajax,$.ajax=$.proxy(this.ajax,this)},b.prototype.destroy=function(){$.ajax=this.originalAjax},b.prototype.ajax=function(a,b){"object"==typeof a&&(b=a,a=void 0);var c=this.options,d=Math.random();if(-1===c.allowedMethods.indexOf(b.type)||d>c.probability)return this.originalAjax.call($,a,b);var e=$.makeArray(c.mischiefTypes);d=Math.round(Math.random()*(e.length-1));var f=e[d],g=this,h=function(){g.originalAjax.call($,a,b).done(function(){i.resolve.apply(null,arguments)}).fail(function(){i.reject.apply(null,arguments)})},i=$.Deferred();return f(this,i,h,b),i.promise()};var c=function(a){c._||(c._=new b(a))};return c.MischiefTypes=a,c});