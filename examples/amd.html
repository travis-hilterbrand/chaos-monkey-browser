<!DOCTYPE html>
<html lang="en">
<head>
</head>
<body>
  <script src="require.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script type="text/javascript">
  require(['../src/chaos-monkey-browser'], function(ChaosMonkey) {
    var props = {
      allowedMethods:['GET'],
      probability:1.0,
      mischiefTypes:[
        ChaosMonkey.defaultMischiefTypes.delay,
        ChaosMonkey.defaultMischiefTypes.http403
      ]
    };
    ChaosMonkey(props);

    $(document).ready(function() {

      function onSuccess(data) {
        console.log('cb success', data);
      }
      function onError(xhr, status, error) {
        console.log('cb failure', error);
      }
      function get() {
        var props = {
          url: 'http://localhost:4450/1/Fails',
          type: 'GET',
          dataType: 'json',
          cache: false,
          success:onSuccess,
          error:onError
        };
        $.ajax(props)
          .done(function(data) {
            console.log('deferred success', data);
          })
          .fail(function(xhr, status, error) {
            console.log('deferred failure', arguments);
          });
      }

      get();  
    });
  });
  </script>
</body>
</html>
